<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PSEEK:: My Pick Art</title>
    <% include ./head/headIndex.ejs %>
    <style>
        body { padding-top: 54px; }
        @media (min-width: 992px) {
            body {
                padding-top: 56px;
            }
        }
        .caption {
            position: absolute;
            width: 245px;
            height: 35px;
            bottom: 30px;
            left: 20px;
            color: #ffffff;
            background: #000000DD;
            text-align:center;
            font-family: Sans-serif;
            opacity:0.7;
        }
    </style>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="/">P-Seek :: <small>artists' playground</small></a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav text-uppercase ml-auto">
                <li class="nav-item" style="margin-top: 13px;">
                    <% if (isLogined) { %>
                        <i class="fas fa-user-circle" style="color: #fed136;"></i>&nbsp;<span id="user" style="color: #fed136;"> <%= user %>&nbsp;&nbsp;<a class="btn btn-basic btn-sm" href="/myPage">MYPAGE</a></span></a>&nbsp;&nbsp;
                        <a class="btn btn-primary btn-sm" id="loginBtn" style="color: #474747" href="/user/logout">Sign Out</a>
                    <% } else { %>
                        <i class="fas fa-user-circle" style="color: #ADADAD"></i>&nbsp;
                        <span id="user" style="color: #fed136">Guest</span>
                    <% } %>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Page Content -->
<div class="container" >
    <h2 class="my-4 text-center text-md-left" style="text-transform: uppercase; padding-top: 20px">
        <%= user %><small> PICK ART</small>
    </h2>
    <div class="row text-center text-lg-left">
        <% if (pickArt.length > 0) { %>
            <% for(var i in pickArt) { %>
                <div class="col-lg-3 col-md-4 col-xs-6">
                    <a href="#artEdit" onclick="modalImg('<%= pickArt[i].art_imgsrc %>', '<%= pickArt[i].art_title %>', '<%= pickArt[i].art_genre %>', '<%= pickArt[i].art_des %>', '<%= pickArt[i].art_loc %>', '<%= pickArt[i].art_id %>')" data-toggle="modal" class="d-block mb-4 h-100">
                        <img id="a" class="img-fluid img-thumbnail" src="<%= pickArt[i].art_imgsrc %>" alt="" style="width: 100%; height: 180px;">
                        <div class="caption"><%= pickArt[i].art_title %></div>
                    </a>
                </div>
            <% } %>
        <% } else { %>
            <div class="col-lg-3 col-md-4 col-xs-6">
                <a href="#" class="d-block mb-4 h-100">
                    <img class="img-fluid img-thumbnail" src="http://placehold.it/400x300" alt="PLEASE  PUT  YOUR  ART  WORK">
                </a>
            </div>
        <% } %>
    </div>
</div>

<!-- Footer -->
<footer class="py-5 bg-dark">
    <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; P-SEEK.com 2019</p>
    </div>
</footer>

<script type="text/javascript">
    // Modal Initialization
    function modalImg(imgSrc, title, genre, des, loc, artId) {
        var editImg = document.getElementById('editImg');
        var editTitle = document.getElementById('editTitle');
        var editGenre = document.getElementById('editGenre');
        var editDes = document.getElementById('editDes');
        var editLoc = document.getElementById('editLoc');
        var editId = document.getElementById('editId');
        var deleteId = document.getElementById('deleteId');
        editImg.src = imgSrc;
        editTitle.value = title;
        editGenre.value = genre;
        editDes.value = des;
        editLoc.value = loc;
        editId.value = artId;
        deleteId.value = artId;
    }
    // Img Change
    $(document).ready(function () {
        var readURL = function(input) {
            // input 에서 가져온 파일 하나가 있으면
            if(input.files[0]) {
                // FileReader 객체를 만들고
                var reader = new FileReader();
                // 객체를 로드하여 editImg의 src 속성값을 변경해줌
                reader.onload = function (element) {
                    $('#editImg').attr('src', element.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        // 파일태그에서 선택한 이미지로 바뀜
        $('#chgImg').on('change', function () {
            readURL(this);
        })

        // add Modal
        var readURL2 = function(input) {
            if(input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (element) {
                    $('.addImg').attr('src', element.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        // 파일태그에서 선택한 이미지로 바뀜
        $('.addImg').on('change', function () {
            readURL2(this);
        })
    });
</script>

<% include ./head/footerIndex.ejs %>
</body>
</html>
